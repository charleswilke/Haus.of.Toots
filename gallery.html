<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery - Haus of Toots</title>
    <meta name="description" content="Browse custom needlepoint canvases, HoT originals, digital charts, and canvas customizations by Jessie Wilke.">
    <link rel="icon" type="image/png" href="images/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Winky+Sans:wght@300;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Gallery page specific styles */
        :root {
            --btn-accent: #FF836F;
            --btn-dark: #E86F5D;
        }

        .gallery-page {
            padding: var(--spacing-lg) 0;
        }

        .gallery-category {
            margin-bottom: var(--spacing-xl);
        }

        .gallery-category-title {
            font-family: var(--font-display);
            font-size: clamp(1.75rem, 3vw, 2.25rem);
            font-weight: 800;
            color: var(--coral-dark);
            margin: 0;
            text-align: center;
        }

        .gallery-category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-md);
        }

        .gallery-category-title-wrapper {
            flex: 1;
            text-align: center;
        }

        .gallery-more-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.375rem 0.75rem;
            background: var(--btn-accent);
            color: var(--white);
            border: none;
            border-radius: var(--border-radius);
            font-family: var(--font-body);
            font-size: 0.8125rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s var(--transition-smooth);
            white-space: nowrap;
        }

        .gallery-more-btn:hover {
            background: var(--btn-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 131, 111, 0.5);
        }

        .gallery-more-btn:active {
            transform: translateY(0);
        }

        .gallery-more-btn svg {
            transition: transform 0.3s ease;
            width: 12px;
            height: 12px;
        }

        .gallery-more-btn.expanded svg {
            transform: rotate(180deg);
        }

        .gallery-thumbnails {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(84px, 1fr));
            gap: var(--spacing-sm);
            position: relative;
        }

        /* Initially hide items beyond the first row */
        .gallery-thumbnails:not(.expanded) .gallery-thumbnail-box:nth-child(n+11) {
            display: none;
        }

        /* Adjust for different screen sizes */
        @media (max-width: 1200px) {
            .gallery-thumbnails:not(.expanded) .gallery-thumbnail-box:nth-child(n+9) {
                display: none;
            }
        }

        @media (max-width: 900px) {
            .gallery-thumbnails:not(.expanded) .gallery-thumbnail-box:nth-child(n+7) {
                display: none;
            }
        }

        @media (max-width: 640px) {
            .gallery-thumbnails:not(.expanded) .gallery-thumbnail-box:nth-child(n+5) {
                display: none;
            }
        }

        @media (max-width: 480px) {
            .gallery-thumbnails:not(.expanded) .gallery-thumbnail-box:nth-child(n+4) {
                display: none;
            }
        }

        .gallery-thumbnail-box {
            position: relative;
            padding: 0;
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s var(--transition-smooth);
        }

        .gallery-thumbnail-box:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 32px rgba(255, 107, 122, 0.2);
        }

        .gallery-thumbnail-image {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
            border-radius: 4px;
        }

        .gallery-item-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            padding: 4px 10px;
            font-size: 0.625rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-radius: 4px;
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.1),
                0 0 0 1px rgba(255, 255, 255, 0.2) inset;
            z-index: 4;
            pointer-events: none;
            backdrop-filter: blur(8px);
        }

        .gallery-item-badge.before {
            background: linear-gradient(135deg, rgba(155, 150, 144, 0.95) 0%, rgba(74, 69, 66, 0.95) 100%);
            color: var(--white);
        }

        .gallery-item-badge.after {
            background: linear-gradient(135deg, rgba(255, 107, 122, 0.95) 0%, rgba(232, 85, 99, 0.95) 100%);
            color: var(--white);
        }

        .lightbox-content {
            position: relative;
        }

        .lightbox-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 8px 16px;
            font-size: 1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            z-index: 10002;
            pointer-events: none;
        }

        .lightbox-badge[data-type="before"] {
            background: linear-gradient(135deg, #9B9690 0%, #4A4542 100%);
            color: var(--white);
        }

        .lightbox-badge[data-type="after"] {
            background: linear-gradient(135deg, var(--coral-primary) 0%, var(--coral-dark) 100%);
            color: var(--white);
        }

        @media (max-width: 768px) {
            .gallery-thumbnails {
                grid-template-columns: repeat(4, 1fr);
                gap: var(--spacing-xs);
            }

            .lightbox-badge {
                top: 8px;
                right: 8px;
                padding: 6px 12px;
                font-size: 0.85rem;
            }

            .gallery-more-btn {
                font-size: 0.75rem;
                padding: 0.35rem 0.65rem;
                gap: 0.25rem;
            }
            
            .gallery-more-btn svg {
                width: 10px;
                height: 10px;
            }
        }

        @media (max-width: 640px) {
            .gallery-thumbnails {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 480px) {
            .gallery-thumbnails {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Lightbox with canvas texture background */
        .lightbox {
            background: rgba(250, 248, 245, 0.98);
            background-image: url('images/haus_of_toots_canvas_13ct_512px.png');
            background-repeat: repeat;
            background-size: 512px 500px;
            background-position: 0 0;
        }

        .lightbox-close,
        .lightbox-prev,
        .lightbox-next {
            background: var(--coral-primary);
            box-shadow: 0 4px 12px rgba(255, 107, 122, 0.6);
        }

        .lightbox-close:hover,
        .lightbox-prev:hover,
        .lightbox-next:hover {
            background: var(--coral-dark);
            box-shadow: 0 6px 16px rgba(255, 107, 122, 0.8);
        }

        .lightbox-caption {
            color: var(--neutral-dark);
            text-shadow: 0 1px 3px rgba(255, 255, 255, 0.8);
            background: rgba(255, 255, 255, 0.9);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--border-radius);
        }
    </style>
</head>
<body>
    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="nav-container">
            <a href="index.html" class="nav-brand">
                <img src="images/hauslogo.png" alt="Haus of Toots logo" class="nav-brand-logo">
                <span class="nav-brand-text">Haus of Toots</span>
                <span class="nav-brand-subtitle">- Custom & Customized Needlepoint Canvases</span>
            </a>
            <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation menu" aria-expanded="false">
                <span class="nav-toggle-icon"></span>
                <span class="nav-toggle-icon"></span>
                <span class="nav-toggle-icon"></span>
            </button>
            <div class="nav-links" id="navLinks">
                <a href="about.html" class="nav-link">About</a>
                <a href="gallery.html" class="nav-link active">Gallery</a>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSd8y7MONwNWWYLNienG8kjcCDZd0De0kJl--dNNfpgUyw4Bfg/viewform?usp=dialog" target="_blank" rel="noopener noreferrer" class="nav-link">Request</a>
                <a href="/shop" class="nav-link">Shop</a>
            </div>
        </div>
    </nav>

    <!-- Scroll Stitch Sidebar -->
    <div class="stitch-sidebar">
        <svg class="stitch-line" viewBox="0 0 60 1000" preserveAspectRatio="xMidYMid slice">
            <defs>
                <linearGradient id="threadGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#FFAAB5;stop-opacity:1" />
                    <stop offset="25%" style="stop-color:#FF8B9A;stop-opacity:1" />
                    <stop offset="50%" style="stop-color:#FF6B7A;stop-opacity:1" />
                    <stop offset="75%" style="stop-color:#E85563;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#D04552;stop-opacity:1" />
                </linearGradient>
            </defs>
            <g id="stitchContainer"></g>
            <g id="needle" transform="translate(30, 0)">
                <line x1="-8" y1="-15" x2="8" y2="-15" stroke="#FF6B7A" stroke-width="3" stroke-linecap="round"/>
                <path d="M 0 -15 L 0 5" stroke="#C0C0C0" stroke-width="2"/>
                <circle cx="0" cy="-18" r="2" fill="#C0C0C0"/>
            </g>
        </svg>
    </div>

    <!-- Cursor Trail Canvas -->
    <canvas id="cursorCanvas"></canvas>

    <!-- Gallery Section -->
    <section class="gallery-page">
        <div class="container" align="center">
            <h1 class="section-title">Recent Pieces</h1>

            <!-- Custom Canvases -->
            <div class="gallery-category">
                <div class="stitched-border">
                    <div class="gallery-category-header">
                        <div class="gallery-category-title-wrapper">
                            <h2 class="gallery-category-title">Custom Canvases</h2>
                        </div>
                        <button class="gallery-more-btn" data-category="custom-canvases">
                            <span class="btn-text">Show All</span>
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </button>
                    </div>
                    <div class="gallery-thumbnails" id="custom-canvases">
                        <!-- Thumbnails will be loaded by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Canvas Customizations -->
            <div class="gallery-category">
                <div class="stitched-border">
                    <div class="gallery-category-header">
                        <div class="gallery-category-title-wrapper">
                            <h2 class="gallery-category-title">Canvas Customizations</h2>
                        </div>
                        <button class="gallery-more-btn" data-category="customizations">
                            <span class="btn-text">Show All</span>
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </button>
                    </div>
                    <div class="gallery-thumbnails" id="customizations">
                        <!-- Thumbnails will be loaded by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Digital Charts -->
            <div class="gallery-category">
                <div class="stitched-border">
                    <div class="gallery-category-header">
                        <div class="gallery-category-title-wrapper">
                            <h2 class="gallery-category-title">Painted from Purchased Digital Charts</h2>
                        </div>
                        <button class="gallery-more-btn" data-category="digital-charts">
                            <span class="btn-text">Show All</span>
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </button>
                    </div>
                    <div class="gallery-thumbnails" id="digital-charts">
                        <!-- Thumbnails will be loaded by JavaScript -->
                    </div>
                </div>
            </div>
            
            <!-- HoT Originals -->
            <div class="gallery-category">
                <div class="stitched-border">
                    <div class="gallery-category-header">
                        <div class="gallery-category-title-wrapper">
                            <h2 class="gallery-category-title">HoT Originals</h2>
                        </div>
                        <button class="gallery-more-btn" data-category="hot-originals">
                            <span class="btn-text">Show All</span>
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </button>
                    </div>
                    <div class="gallery-thumbnails" id="hot-originals">
                        <!-- Thumbnails will be loaded by JavaScript -->
                    </div>
                </div>
            </div>

            
        </div>
    </section>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="/shop" class="footer-link">Shop Digital Patterns</a>
                    <span class="footer-divider">•</span>
                    <a href="index.html#request" class="footer-link">Request Custom Design</a>
                </div>
                <div class="footer-social">
                    <a href="https://instagram.com/haus.of.toots" target="_blank" rel="noopener noreferrer" class="social-link needle-hover">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                        </svg>
                        <span>@haus.of.toots</span>
                    </a>
                </div>
                <div class="footer-credits">
                    <p>Made with <span class="heart">♥</span></p>
                    <p class="copyright">&copy; 2025 Haus of Toots. Designs and customizations by Jessie Wilke.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-label="Image gallery">
        <button class="lightbox-close" aria-label="Close gallery">&times;</button>
        <button class="lightbox-prev" aria-label="Previous image">&#8249;</button>
        <button class="lightbox-next" aria-label="Next image">&#8250;</button>
        <div class="lightbox-content">
            <img src="" alt="" class="lightbox-image">
            <div class="lightbox-caption"></div>
        </div>
    </div>

    <script>
        // Gallery data structure matching the existing categories
        const galleryData = {
            'custom-canvases': [
                { thumb: 'images/recent-canvases/1CustomCanvases/hot-thumbnail-CampFlannelFizz.jpg', full: 'images/recent-canvases/1CustomCanvases/CampFlannelFizz.jpeg', title: 'Camp Flannel Fizz' },
                { thumb: 'images/recent-canvases/1CustomCanvases/hot-thumbnail-CowboyBear.jpg', full: 'images/recent-canvases/1CustomCanvases/CowboyBear.jpeg', title: 'Cowboy Bear' },
                { thumb: 'images/recent-canvases/1CustomCanvases/hot-thumbnail-HappyHollowRectangle.jpg', full: 'images/recent-canvases/1CustomCanvases/HappyHollowRectangle.jpeg', title: 'Happy Hollow Rectangle' },
                { thumb: 'images/recent-canvases/1CustomCanvases/hot-thumbnail-HappyHollowRound.jpg', full: 'images/recent-canvases/1CustomCanvases/HappyHollowRound.jpeg', title: 'Happy Hollow Round' },
                { thumb: 'images/recent-canvases/1CustomCanvases/hot-thumbnail-Mazie-and-Smiley.jpg', full: 'images/recent-canvases/1CustomCanvases/Mazie-and-Smiley.jpeg', title: 'Mazie and Smiley' },
                { thumb: 'images/recent-canvases/1CustomCanvases/hot-thumbnail-Mazie.jpg', full: 'images/recent-canvases/1CustomCanvases/Mazie.jpeg', title: 'Mazie' },
                { thumb: 'images/recent-canvases/1CustomCanvases/hot-thumbnail-MommyOnly.jpg', full: 'images/recent-canvases/1CustomCanvases/MommyOnly.jpeg', title: 'Mommy Only' },
                { thumb: 'images/recent-canvases/1CustomCanvases/hot-thumbnail-Smiley.jpg', full: 'images/recent-canvases/1CustomCanvases/Smiley.jpeg', title: 'Smiley' },
                { thumb: 'images/recent-canvases/1CustomCanvases/hot-thumbnail-Winston.jpg', full: 'images/recent-canvases/1CustomCanvases/Winston.jpeg', title: 'Winston' },
                { thumb: 'images/recent-canvases/1CustomCanvases/hot-thumbnail-YouAreMySunshine2.jpg', full: 'images/recent-canvases/1CustomCanvases/YouAreMySunshine2.jpeg', title: 'You Are My Sunshine' },
                { thumb: 'images/recent-canvases/1CustomCanvases/thumb-NotreDameLuggageTagInsert.jpg', full: 'images/recent-canvases/1CustomCanvases/NotreDameLuggageTagInsert.jpg', title: 'Notre Dame Luggage Tag Insert' },
                { thumb: 'images/recent-canvases/1CustomCanvases/thumb-PallMallCigaretteBox.jpg', full: 'images/recent-canvases/1CustomCanvases/PallMallCigaretteBox.jpg', title: 'Pall Mall Cigarette Box' },
                { thumb: 'images/recent-canvases/1CustomCanvases/thumb-RingBearerPillow.jpg', full: 'images/recent-canvases/1CustomCanvases/RingBearerPillow.jpg', title: 'Ring Bearer Pillow' },
                { thumb: 'images/recent-canvases/1CustomCanvases/thumb-SimpleMonogram4Self-FinishingJewelryBox.jpg', full: 'images/recent-canvases/1CustomCanvases/SimpleMonogram4Self-FinishingJewelryBox.jpg', title: 'Simple Monogram for Self-Finishing Jewelry Box' },
                { thumb: 'images/recent-canvases/1CustomCanvases/thumb-UNOMaverickBagCharm.jpg', full: 'images/recent-canvases/1CustomCanvases/UNOMaverickBagCharm.jpg', title: 'UNO Maverick Bag Charm' }
            ],
            'hot-originals': [
                { thumb: 'images/recent-canvases/2HoT-originals/hot-thumbnail-SephoraHoliday.jpg', full: 'images/recent-canvases/2HoT-originals/SephoraHoliday.jpeg', title: 'Sephora Holiday' },
                { thumb: 'images/recent-canvases/2HoT-originals/hot-thumbnail-SephoraStandard.jpg', full: 'images/recent-canvases/2HoT-originals/SephoraStandard.jpg', title: 'Sephora Standard' },
                { thumb: 'images/recent-canvases/2HoT-originals/hot-thumbnail-SharpestTool.jpg', full: 'images/recent-canvases/2HoT-originals/SharpestTool.jpeg', title: 'Sharpest Tool' }
            ],
            'digital-charts': [
                { thumb: 'images/recent-canvases/3PaintedFromPurchasedDigitalCharts/hot-thumbnail-DuckHunt-by-TurtleStitchShop-Etsy.jpg', full: 'images/recent-canvases/3PaintedFromPurchasedDigitalCharts/DuckHunt-by-TurtleStitchShop-Etsy.jpeg', title: 'Duck Hunt' },
                { thumb: 'images/recent-canvases/3PaintedFromPurchasedDigitalCharts/hot-thumbnail-FuckOff-by-HoopModernStitch-Etsy.jpg', full: 'images/recent-canvases/3PaintedFromPurchasedDigitalCharts/FuckOff-by-HoopModernStitch-Etsy.jpeg', title: 'Fuck Off' },
                { thumb: 'images/recent-canvases/3PaintedFromPurchasedDigitalCharts/hot-thumbnail-Kermit-w-PearlEarring-by-CherryMarryStore-Etsy.jpg', full: 'images/recent-canvases/3PaintedFromPurchasedDigitalCharts/Kermit-w-PearlEarring-by-CherryMarryStore-Etsy.jpeg', title: 'Kermit with Pearl Earring' },
                { thumb: 'images/recent-canvases/3PaintedFromPurchasedDigitalCharts/hot-thumbnail-PeeWee-by-StitchedIts-Etsy.jpg', full: 'images/recent-canvases/3PaintedFromPurchasedDigitalCharts/PeeWee-by-StitchedIts-Etsy.jpeg', title: 'Pee Wee' },
                { thumb: 'images/recent-canvases/3PaintedFromPurchasedDigitalCharts/hot-thumbnail-PixelHearts-by-PixellPatterns-Etsy.jpg', full: 'images/recent-canvases/3PaintedFromPurchasedDigitalCharts/PixelHearts-by-PixellPatterns-Etsy.jpeg', title: 'Pixel Hearts' },
                { thumb: 'images/recent-canvases/3PaintedFromPurchasedDigitalCharts/hot-thumbnail-PopeKermit-by-CherryMarryStore.jpg', full: 'images/recent-canvases/3PaintedFromPurchasedDigitalCharts/PopeKermit-by-CherryMarryStore.jpeg', title: 'Pope Kermit' }
            ],
            'customizations': [
                { thumb: 'images/recent-canvases/4CanvasCustomizations/hot-thumbnail-Kathryn-StockingCustomization-After.jpg', full: 'images/recent-canvases/4CanvasCustomizations/Kathryn-StockingCustomization-After.jpeg', title: 'Kathryn Stocking - After', badge: 'after' },
                { thumb: 'images/recent-canvases/4CanvasCustomizations/hot-thumbnail-Lance-StockingCustomization-After.jpg', full: 'images/recent-canvases/4CanvasCustomizations/Lance-StockingCustomization-After.jpg', title: 'Lance Stocking - After', badge: 'after' },
                { thumb: 'images/recent-canvases/4CanvasCustomizations/hot-thumbnail-Lance-StockingCustomization-After2.jpg', full: 'images/recent-canvases/4CanvasCustomizations/Lance-StockingCustomization-After2.jpg', title: 'Lance Stocking - After 2', badge: 'after' },
                { thumb: 'images/recent-canvases/4CanvasCustomizations/hot-thumbnail-Lance-StockingCustomization-Before.jpg', full: 'images/recent-canvases/4CanvasCustomizations/Lance-StockingCustomization-Before.jpeg', title: 'Lance Stocking - Before', badge: 'before' },
                { thumb: 'images/recent-canvases/4CanvasCustomizations/hot-thumbnail-MM-CanvasMonogram-After.jpg', full: 'images/recent-canvases/4CanvasCustomizations/MM-CanvasMonogram-After.jpeg', title: 'MM Canvas Monogram - After', badge: 'after' },
                { thumb: 'images/recent-canvases/4CanvasCustomizations/hot-thumbnail-MM-CanvasMonogram-Before.jpg', full: 'images/recent-canvases/4CanvasCustomizations/MM-CanvasMonogram-Before.jpeg', title: 'MM Canvas Monogram - Before', badge: 'before' },
                { thumb: 'images/recent-canvases/4CanvasCustomizations/hot-thumbnail-Pinehurst-Customization-After.jpg', full: 'images/recent-canvases/4CanvasCustomizations/Pinehurst-Customization-After.jpeg', title: 'Pinehurst - After', badge: 'after' },
                { thumb: 'images/recent-canvases/4CanvasCustomizations/hot-thumbnail-Pinehurst-Customization-Before.jpg', full: 'images/recent-canvases/4CanvasCustomizations/Pinehurst-Customization-Before.jpeg', title: 'Pinehurst - Before', badge: 'before' }
            ]
        };

        // Populate galleries
        Object.keys(galleryData).forEach(categoryId => {
            const container = document.getElementById(categoryId);
            const items = galleryData[categoryId];
            
            items.forEach((item, index) => {
                const box = document.createElement('div');
                box.className = 'gallery-thumbnail-box';
                box.setAttribute('data-full', item.full);
                box.setAttribute('data-title', item.title);
                box.setAttribute('data-category', categoryId);
                box.setAttribute('data-index', index);
                
                const img = document.createElement('img');
                img.className = 'gallery-thumbnail-image';
                img.src = item.thumb;
                img.alt = item.title;
                img.loading = 'lazy';
                
                box.appendChild(img);
                
                // Add badge if present
                if (item.badge) {
                    const badge = document.createElement('div');
                    badge.className = `gallery-item-badge ${item.badge}`;
                    badge.textContent = item.badge.charAt(0).toUpperCase() + item.badge.slice(1);
                    box.appendChild(badge);
                }
                
                container.appendChild(box);
            });
        });

        // Function to check if button should be visible based on item count
        function updateButtonVisibility() {
            document.querySelectorAll('.gallery-more-btn').forEach(btn => {
                const categoryId = btn.getAttribute('data-category');
                const container = document.getElementById(categoryId);
                const items = galleryData[categoryId];
                const itemCount = items.length;
                
                // Determine how many items fit initially based on screen width
                let initialItems = 10; // Default for desktop
                const width = window.innerWidth;
                
                if (width <= 480) {
                    initialItems = 3;
                } else if (width <= 640) {
                    initialItems = 4;
                } else if (width <= 900) {
                    initialItems = 6;
                } else if (width <= 1200) {
                    initialItems = 8;
                }
                
                // Hide button if all items fit in initial view
                if (itemCount <= initialItems) {
                    btn.style.display = 'none';
                } else {
                    btn.style.display = 'inline-flex';
                }
            });
        }

        // Call on page load
        updateButtonVisibility();

        // Call on window resize
        let resizeTimer;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(updateButtonVisibility, 250);
        });

        // Handle "Show All" buttons
        document.querySelectorAll('.gallery-more-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const categoryId = this.getAttribute('data-category');
                const container = document.getElementById(categoryId);
                const isExpanded = container.classList.contains('expanded');
                const btnText = this.querySelector('.btn-text');
                
                if (isExpanded) {
                    container.classList.remove('expanded');
                    btnText.textContent = 'Show All';
                    this.classList.remove('expanded');
                    // Scroll to the category title
                    this.closest('.gallery-category').scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else {
                    container.classList.add('expanded');
                    btnText.textContent = 'Hide';
                    this.classList.add('expanded');
                }
            });
        });

        // Lightbox functionality
        let currentCategory = '';
        let currentIndex = 0;

        document.querySelectorAll('.gallery-thumbnail-box').forEach(box => {
            box.addEventListener('click', function() {
                currentCategory = this.getAttribute('data-category');
                currentIndex = parseInt(this.getAttribute('data-index'));
                openLightbox(currentCategory, currentIndex);
            });
        });

        function openLightbox(category, index) {
            const lightbox = document.getElementById('lightbox');
            const items = galleryData[category];
            const item = items[index];
            
            const img = lightbox.querySelector('.lightbox-image');
            const caption = lightbox.querySelector('.lightbox-caption');
            
            img.src = item.full;
            img.alt = item.title;
            caption.textContent = item.title;
            
            // Remove any existing badge
            const existingBadge = lightbox.querySelector('.lightbox-badge');
            if (existingBadge) {
                existingBadge.remove();
            }
            
            // Add badge if present
            if (item.badge) {
                const badge = document.createElement('div');
                badge.className = 'lightbox-badge';
                badge.setAttribute('data-type', item.badge);
                badge.textContent = item.badge.charAt(0).toUpperCase() + item.badge.slice(1);
                // Append to lightbox-content so it's positioned relative to the image
                lightbox.querySelector('.lightbox-content').appendChild(badge);
            }
            
            lightbox.classList.add('active');
            
            // Update prev/next button states
            updateLightboxButtons(category, index, items.length);
        }

        function updateLightboxButtons(category, index, total) {
            const prevBtn = document.querySelector('.lightbox-prev');
            const nextBtn = document.querySelector('.lightbox-next');
            
            prevBtn.style.display = index > 0 ? 'flex' : 'none';
            nextBtn.style.display = index < total - 1 ? 'flex' : 'none';
        }

        document.querySelector('.lightbox-close').addEventListener('click', () => {
            document.getElementById('lightbox').classList.remove('active');
        });

        document.querySelector('.lightbox-prev').addEventListener('click', () => {
            if (currentIndex > 0) {
                currentIndex--;
                openLightbox(currentCategory, currentIndex);
            }
        });

        document.querySelector('.lightbox-next').addEventListener('click', () => {
            const items = galleryData[currentCategory];
            if (currentIndex < items.length - 1) {
                currentIndex++;
                openLightbox(currentCategory, currentIndex);
            }
        });

        // Close lightbox on clicking overlay
        document.getElementById('lightbox').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.remove('active');
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            const lightbox = document.getElementById('lightbox');
            if (!lightbox.classList.contains('active')) return;
            
            if (e.key === 'Escape') {
                lightbox.classList.remove('active');
            } else if (e.key === 'ArrowLeft' && currentIndex > 0) {
                currentIndex--;
                openLightbox(currentCategory, currentIndex);
            } else if (e.key === 'ArrowRight') {
                const items = galleryData[currentCategory];
                if (currentIndex < items.length - 1) {
                    currentIndex++;
                    openLightbox(currentCategory, currentIndex);
                }
            }
        });

        // Touch swipe support for mobile
        (function setupTouchSwipe() {
            let touchStartX = 0;
            let touchEndX = 0;
            let touchStartY = 0;
            let touchEndY = 0;
            const swipeThreshold = 50; // Minimum distance for a swipe
            const lightbox = document.getElementById('lightbox');
            const lightboxContent = lightbox.querySelector('.lightbox-content');
            
            lightboxContent.addEventListener('touchstart', function(e) {
                touchStartX = e.changedTouches[0].screenX;
                touchStartY = e.changedTouches[0].screenY;
            }, { passive: true });
            
            lightboxContent.addEventListener('touchend', function(e) {
                if (!lightbox.classList.contains('active')) return;
                
                touchEndX = e.changedTouches[0].screenX;
                touchEndY = e.changedTouches[0].screenY;
                
                const deltaX = touchEndX - touchStartX;
                const deltaY = touchEndY - touchStartY;
                
                // Only process horizontal swipes (ignore if vertical movement is greater)
                if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > swipeThreshold) {
                    if (deltaX > 0) {
                        // Swipe right - go to previous image
                        if (currentIndex > 0) {
                            currentIndex--;
                            openLightbox(currentCategory, currentIndex);
                        }
                    } else {
                        // Swipe left - go to next image
                        const items = galleryData[currentCategory];
                        if (currentIndex < items.length - 1) {
                            currentIndex++;
                            openLightbox(currentCategory, currentIndex);
                        }
                    }
                }
            }, { passive: true });
        })();
    </script>
    <script src="script.js"></script>
</body>
</html>

